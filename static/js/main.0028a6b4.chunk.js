(this["webpackJsonpsnake-game"]=this["webpackJsonpsnake-game"]||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){},15:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var s=a(2),o=a(8),n=a.n(o),i=(a(13),a(3)),r=a(4),c=a(6),d=a(5),h=(a(14),a(0)),u=(a(15),a(1)),l=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={snake:[],snakeHead:0,board:[],boardRowSize:30,boardColSize:40,snakeDirection:"R",food:0,poisonFood:0,score:0,speed:200,border:new Set},document.addEventListener("keydown",(function(e){console.log(e.key),s.handleSnakeDirection(e.key)})),s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var e=this;new Promise((function(t,a){e.makeBoard(),t()})).then((function(){e.makeBorder(),e.makeFood(),e.makeSnake(),setTimeout((function(){return e.snakeMove()}),e.state.speed)}))}},{key:"makeBoard",value:function(){for(var e=[],t=1,a=0;a<this.state.boardRowSize;a++){for(var s=[],o=0;o<this.state.boardColSize;o++)s.push(t++);e.push(s)}console.log(e),this.setState(Object(h.a)(Object(h.a)({},this.state),{},{board:e}))}},{key:"makeBorder",value:function(){var e=new Set,t=this.state.board;t[0].forEach((function(t){return e.add(t)})),t[t.length-1].forEach((function(t){return e.add(t)}));for(var a=(this.state.boardRowSize-1)*this.state.boardColSize,s=this.state.boardColSize+1;s<a+1;s++)s%this.state.boardColSize<=1&&e.add(s);console.log(e),this.setState(Object(h.a)(Object(h.a)({},this.state),{},{border:e}))}},{key:"makeFood",value:function(){for(var e=0,t=(this.state.boardRowSize-1)*this.state.boardColSize,a=this.state.boardColSize+1;e=Math.floor(Math.random()*(t-a+1)+a),this.state.snake.includes(e)||this.state.food===e||this.state.border.has(e););var s=0;Math.random()<.3&&(s=e),this.setState(Object(h.a)(Object(h.a)({},this.state),{},{food:e,poisonFood:s})),console.log(this.state.food),console.log(this.state.poisonFood)}},{key:"makeSnake",value:function(){var e=[],t=(Math.floor(this.state.boardRowSize/4)+1)*this.state.boardColSize+2;e.push(t),e.push(t+1),e.push(t+2);var a=e[e.length-1];this.setState(Object(h.a)(Object(h.a)({},this.state),{},{snake:e,snakeHead:a}))}},{key:"snakeMove",value:function(){var e,t=this,a=this.state.snake,s=a[a.length-1],o=this.state.snakeDirection;"R"===o&&(e=s+1),"L"===o&&(e=s-1),"U"===o&&(e=s-this.state.boardColSize),"D"===o&&(e=s+this.state.boardColSize);var n=this.state.score,i=this.state.speed,r=!1;this.state.food===e?(this.state.poisonFood===e&&(r=!0,n+=2),this.makeFood(),n++,i>40&&(i=Math.floor(90*i/100))):a.shift(),this.state.border.has(e)||this.state.snake.includes(e)?console.log("dead"):setTimeout((function(){return t.snakeMove()}),i),a.push(e),this.setState(Object(h.a)(Object(h.a)({},this.state),{},{snake:a,snakeHead:e,score:n,speed:i})),r&&this.reverseSnake()}},{key:"handleSnakeDirection",value:function(e){var t=this.state.snakeDirection,a=this.currentSnakeDirection();"ArrowRight"===e&&"L"!==a&&(t="R"),"ArrowLeft"===e&&"R"!==a&&(t="L"),"ArrowUp"===e&&"D"!==a&&(t="U"),"ArrowDown"===e&&"U"!==a&&(t="D"),this.setState(Object(h.a)(Object(h.a)({},this.state),{},{snakeDirection:t}))}},{key:"currentSnakeDirection",value:function(){var e="",t=this.state.snake,a=t[t.length-1],s=t[t.length-2];return a-s===1&&(e="R"),a-s===-1&&(e="L"),a-s===this.state.boardColSize&&(e="D"),a-s===-this.state.boardColSize&&(e="U"),e}},{key:"reverseSnake",value:function(){var e=this.state.snake.reverse(),t=this.currentSnakeDirection();this.setState(Object(h.a)(Object(h.a)({},this.state),{},{snake:e,snakeDirection:t}))}},{key:"render",value:function(){var e=this,t=this.state.board;return Object(u.jsxs)("div",{children:[Object(u.jsxs)("h2",{children:["SCORE : ",this.state.score]}),t.map((function(t,a){return Object(u.jsx)("div",{className:"row",children:t.map((function(t,a){return Object(u.jsx)("div",{className:"cell ".concat(e.state.snake.includes(t)?"snake-cell":""," ").concat(e.state.border.has(t)?"border-cell":""," ").concat(e.state.food===t?"food-cell":""," ").concat(e.state.snakeHead===t?"snakeHead-cell":"","\n                ").concat(e.state.poisonFood===t?"poisonFood-cell":"")},a)}))},a)}))]})}}]),a}(s.Component),k=function(e){Object(c.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).state={isRenderBoard:!0},document.addEventListener("keydown",(function(e){"r"===e.key&&s.reloadGame()})),s}return Object(r.a)(a,[{key:"reloadGame",value:function(){var e=this;new Promise((function(t,a){e.setState({isRenderBoard:!e.state.isRenderBoard}),t()})).then((function(){e.setState({isRenderBoard:!e.state.isRenderBoard})}))}},{key:"render",value:function(){var e=this;return Object(u.jsxs)("div",{className:"App",children:[this.state.isRenderBoard?Object(u.jsx)(l,{}):"",Object(u.jsx)("button",{type:"button",className:"btn",onClick:function(){return e.reloadGame()},children:'Press "R" to Restart'})]})}}]),a}(s.Component),b=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,18)).then((function(t){var a=t.getCLS,s=t.getFID,o=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),s(e),o(e),n(e),i(e)}))};n.a.render(Object(u.jsx)(k,{}),document.getElementById("root")),b()}},[[17,1,2]]]);
//# sourceMappingURL=main.0028a6b4.chunk.js.map